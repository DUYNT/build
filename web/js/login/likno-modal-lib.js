/** LiknoModal 1.14.0603 - Copyright (c) 2013-2014 - a Likno Software library based on the*/
/** SimpleModal 1.2.3 - jQuery Plugin* http://www.ericmmartin.com/projects/simplemodal/* Copyright (c) 2009 Eric Martin* Dual licensed under the MIT and GPL licenses* Revision: $Id: jquery.simplemodal.js 185 2009-02-09 21:51:12Z emartin24 $*/

if(typeof lQuery!="undefined"){if(typeof lQuery.easing.easeInQuad=="undefined"){lQuery.extend(lQuery.easing,{easeInQuad:function(g,h,f,j,i){return j*(h/=i)*h+f},easeOutQuad:function(g,h,f,j,i){return-j*(h/=i)*(h-2)+f},easeInOutQuad:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h+f}return-j/2*(--h*(h-2)-1)+f},easeInCubic:function(g,h,f,j,i){return j*(h/=i)*h*h+f},easeOutCubic:function(g,h,f,j,i){return j*((h=h/i-1)*h*h+1)+f},easeInOutCubic:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h+f}return j/2*((h-=2)*h*h+2)+f},easeInQuart:function(g,h,f,j,i){return j*(h/=i)*h*h*h+f},easeOutQuart:function(g,h,f,j,i){return-j*((h=h/i-1)*h*h*h-1)+f},easeInOutQuart:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h+f}return-j/2*((h-=2)*h*h*h-2)+f},easeInQuint:function(g,h,f,j,i){return j*(h/=i)*h*h*h*h+f},easeOutQuint:function(g,h,f,j,i){return j*((h=h/i-1)*h*h*h*h+1)+f},easeInOutQuint:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h*h+f}return j/2*((h-=2)*h*h*h*h+2)+f},easeInSine:function(g,h,f,j,i){return-j*Math.cos(h/i*(Math.PI/2))+j+f},easeOutSine:function(g,h,f,j,i){return j*Math.sin(h/i*(Math.PI/2))+f},easeInOutSine:function(g,h,f,j,i){return-j/2*(Math.cos(Math.PI*h/i)-1)+f},easeInExpo:function(g,h,f,j,i){return h==0?f:j*Math.pow(2,10*(h/i-1))+f},easeOutExpo:function(g,h,f,j,i){return h==i?f+j:j*(-Math.pow(2,-10*h/i)+1)+f},easeInOutExpo:function(g,h,f,j,i){if(h==0){return f}if(h==i){return f+j}if((h/=i/2)<1){return j/2*Math.pow(2,10*(h-1))+f}return j/2*(-Math.pow(2,-10*--h)+2)+f},easeInCirc:function(g,h,f,j,i){return-j*(Math.sqrt(1-(h/=i)*h)-1)+f},easeOutCirc:function(g,h,f,j,i){return j*Math.sqrt(1-(h=h/i-1)*h)+f},easeInOutCirc:function(g,h,f,j,i){if((h/=i/2)<1){return-j/2*(Math.sqrt(1-h*h)-1)+f}return j/2*(Math.sqrt(1-(h-=2)*h)+1)+f},easeInElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return-(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f},easeOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return h*Math.pow(2,-10*i)*Math.sin((i*l-j)*(2*Math.PI)/k)+m+f},easeInOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l/2)==2){return f+m}if(!k){k=l*(.3*1.5)}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}if(i<1){return-.5*(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f}return h*Math.pow(2,-10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k)*.5+m+f},easeInBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*(h/=j)*h*((i+1)*h-i)+f},easeOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*((h=h/j-1)*h*((i+1)*h+i)+1)+f},easeInOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}if((h/=j/2)<1){return k/2*(h*h*(((i*=1.525)+1)*h-i))+f}return k/2*((h-=2)*h*(((i*=1.525)+1)*h+i)+2)+f},easeInBounce:function(g,h,f,j,i){return j-lQuery.easing.easeOutBounce(g,i-h,0,j,i)+f},easeOutBounce:function(g,h,f,j,i){if((h/=i)<1/2.75){return j*(7.5625*h*h)+f}else{if(h<2/2.75){return j*(7.5625*(h-=1.5/2.75)*h+.75)+f}else{if(h<2.5/2.75){return j*(7.5625*(h-=2.25/2.75)*h+.9375)+f}else{return j*(7.5625*(h-=2.625/2.75)*h+.984375)+f}}}},easeInOutBounce:function(g,h,f,j,i){if(h<i/2){return lQuery.easing.easeInBounce(g,h*2,0,j,i)*.5+f}return lQuery.easing.easeOutBounce(g,h*2-i,0,j,i)*.5+j*.5+f}})}if(typeof lQuery.speed=="undefined"){lQuery.speed=function(G,H,F){var E=typeof G==="object"?lQuery.extend({},G):{complete:F||!F&&H||lQuery.isFunction(G)&&G,duration:G,easing:F&&H||H&&!lQuery.isFunction(H)&&H};E.duration=lQuery.fx.off?0:typeof E.duration==="number"?E.duration:lQuery.fx.speeds[E.duration]||lQuery.fx.speeds._default;E.old=E.complete;E.complete=function(){if(E.queue!==false){lQuery(this).dequeue()}if(lQuery.isFunction(E.old)){E.old.call(this)}};return E}}if(typeof lQuery.cookie=="undefined"){lQuery.cookie=function(name,value,options){if(typeof value!="undefined"){options=options||{};if(value===null){value="";options.expires=-1}var expires="";if(options.expires&&(typeof options.expires=="number"||options.expires.toUTCString)){var date;if(typeof options.expires=="number"){date=new Date;date.setTime(date.getTime()+options.expires*24*60*60*1e3)}else{date=options.expires}expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"";var domain=options.domain?"; domain="+options.domain:"";var secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}else{var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=lQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}}}if(typeof lQuery.browser=="undefined"){(function(lQuery,window,undefined){var matched,browser;lQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=lQuery.uaMatch(window.navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else if(browser.webkit){browser.safari=true}lQuery.browser=browser})(lQuery,window)}}(function($){var ie6=$.browser.msie&&parseInt($.browser.version)==6&&typeof window["XMLHttpRequest"]!="object",noRGBa=$.browser.msie&&parseInt($.browser.version)<9,ieQuirks=null,isTouch=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i),w=[],opts=null,dialog={};if(typeof ie6=="undefined")ie6=false;if(typeof isTouch=="undefined")isTouch=false;$.liknoModal=function(data,options){return $.liknoModal.impl.init(data,options)};$.liknoModal.close=function(){$.liknoModal.impl.close()};$.liknoModal.impl={defaults:{minWindowBorder:30,autoSizeWidth:false,autoSizeHeight:false,hideScrollbars:false,dontBreakOutOfFrames:false,breakOutOfFrames:false,imageFitToWindow:true,docScroll:"",keyboardNavigation:true,lockWindowScroll:true,D:document,modalFullId:"liknomodal",modalClass:"liknomodal",appendTo:"body",focus:true,opacity:50,showOnlyOnce:false,showOnlyOnceUntil:1,letUserBlockWindow:false,overlayId:"liknomodal-overlay",overlayCss:{backgroundColor:"black"},containerId:"liknomodal-container",containerCss:{borderWidth:0,"box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box","-ms-box-sizing":"content-box"},bodyId:"liknomodal-body",bodyCss:{border:"none",borderWidth:0,margin:0,padding:0,backgroundColor:"transparent",backgroundImage:""},wrapCss:{borderWidth:0},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:true,zIndex:1e3,close:{show:true,text:'<a class="modalCloseImg" title="Close"></a>',textCss:{whitespace:"nowrap",top:5,right:8,cursor:"pointer"},closeClass:"liknomodal-close",escClose:true,overlayClose:true,stillLoading:false},position:[0,0],positionType:0,positionTargetAnchor:8,positionModalAnchor:8,positionTarget:"",persist:false,onOpen:null,onShow:null,onClose:null,afterClose:null,isMultiSheet:false,currentSheet:0,oldSheet:-1,loop:true,play:{autoStart:false,pauseByMouse:true,direction:0,delay:1e3,timer:null,isRunning:false},floatingArrows:{show:false,previousHTML:"&laquo;",nextHTML:"&raquo;",cssClasses:".floatingArrow { border: 1px solid orange; border-radius: 15px; padding: 3px 7px 3px 7px; cursor: pointer; } .floatingArrow.normal { color: #6495ED; border-color: #6495ED; }  .floatingArrow.over { color: #FF7F50; border-color: #FF7F50; } .floatingArrow.click { color: #CD853F; border-color: #CD853F; } .floatingArrow.disabled { color: #708090; border-color: #708090; }",opacity:75,opacityOver:100,offsetX:0,offsetY:0},navigationBar:{showWhere:12,maxSheets:9,show:true,showFirst:true,showPrev:true,showPlayPause:false,showLabel:true,showSheets:true,showNext:true,showLast:true,isFloating:false,fullSize:true,playerCss:{},text:"Sheets: ",showSheetType:0,showBulletsOnly:false,opacity:100,opacityOver:100,offset:[0,0],cssClasses:"",images:{butFirst:"",butFirstOver:"",butPrev:"",butPrevOver:"",butPlay:"",butPlayOver:"",butPause:"",butPauseOver:"",butNext:"",butNextOver:"",butLast:"",butLastOver:"",bulletNormal:"",bulletOver:"",bulletSelected:""}},ajaxLoadImage:"",animation:{closeHTML:{openWhat:{},closeWhat:{}},close:{window:{what:{},how:{duration:0,easing:"linear"}},overlay:{what:{},how:{duration:0,easing:"linear"}}},open:{window:{what:{},how:{duration:0,easing:"linear"}},overlay:{what:{},how:{duration:0,easing:"linear"}}}},transition:{openWhat:{},openHow:{duration:0,easing:"linear"},closeWhat:{},closeHow:{duration:0,easing:"linear"}},header:{show:false,id:null,text:"",textCss:{display:"none",borderWidth:0,overflow:"hidden","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box","-ms-box-sizing":"content-box"}},footer:{show:false,id:null,text:"",textCss:{display:"none",borderWidth:0,overflow:"hidden","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box","-ms-box-sizing":"content-box"}}},init:function(data,options){dialog.dataFrame=[];var self=this;if(dialog.data){if(opts.modalFullId==options.modalFullId)return;else self.close(function(){self.init(data,options)});return false}ieQuirks=document.compatMode==="BackCompat";if(typeof ieQuirks=="undefined")ieQuirks=false;if(typeof options=="number"||typeof options=="string")options={currentSheet:options};opts=$.extend(true,{},this.defaults,options);if(typeof options=="object")if(typeof options.transition=="object")opts.transition=options.transition;if(typeof options=="object")if(typeof options.bodySource!="undefined")data=options.bodySource;if(opts.showOnlyOnce){if($.cookie(opts.modalFullId)!=null)return false;else if(opts.showOnlyOnceUntil==null)$.cookie(opts.modalFullId," ",{path:"/"});else if(!opts.letUserBlockWindow)$.cookie(opts.modalFullId," ",{expires:opts.showOnlyOnceUntil,path:"/"})}if(typeof opts.containerCss.width=="undefined")opts.containerCss.width="auto";if(typeof opts.containerCss.height=="undefined")opts.containerCss.height="auto";if(typeof opts.wrapCss.width=="undefined")opts.wrapCss.width="auto";if(typeof opts.wrapCss.height=="undefined")opts.wrapCss.height="auto";var tmp=$("<div>&nbsp;</div>").css(opts.containerCss);if(opts.header.show){if(typeof opts.header.textCss.borderRadius=="undefined"){opts.header.textCss.borderTopLeftRadius=tmp.css("borderTopLeftRadius");opts.header.textCss.borderTopRightRadius=tmp.css("borderTopRightRadius")}}else{if(typeof opts.wrapCss.borderRadius=="undefined"){opts.wrapCss.borderTopLeftRadius=tmp.css("borderTopLeftRadius");opts.wrapCss.borderTopRightRadius=tmp.css("borderTopRightRadius")}}if(opts.footer.show){if(typeof opts.footer.textCss.borderRadius=="undefined"){opts.footer.textCss.borderBottomLeftRadius=tmp.css("borderBottomLeftRadius");opts.footer.textCss.borderBottomRightRadius=tmp.css("borderBottomRightRadius")}}else{if(typeof opts.wrapCss.borderRadius=="undefined"){opts.wrapCss.borderBottomLeftRadius=tmp.css("borderBottomLeftRadius");opts.wrapCss.borderBottomRightRadius=tmp.css("borderBottomRightRadius")}}if(noRGBa&&opts.overlayCss.backgroundColor.substr(0,4)=="RGBa"){var tmp=opts.overlayCss.backgroundColor.substr(5,opts.overlayCss.backgroundColor.length-6).split(",");opts.overlayCss.backgroundColor="#"+self.HexFromRGBa(opts.overlayCss.backgroundColor);opts.opacity=parseFloat(tmp[3])*opts.opacity}opts.autoSizeWidth=typeof opts.containerCss.width=="undefined"||opts.containerCss.width=="auto";opts.autoSizeHeight=typeof opts.containerCss.height=="undefined"||opts.containerCss.height=="auto";if(typeof options=="object"&&typeof options.animation=="object"&&typeof options.animation.window=="object"){var w=options.animation.window,o=options.animation.overlay,op=opts.animation.open,cl=opts.animation.close;if(typeof w.openWhat=="object"){op.window.what=w.openWhat;op.window.how=w.openHow;op.overlay.what=o.openWhat;op.overlay.how=o.openHow}if(typeof w.closeWhat=="object"){cl.window.what=w.closeWhat;cl.window.how=w.closeHow;cl.overlay.what=o.closeWhat;cl.overlay.how=o.closeHow}}var isEmpty=true;for(var x in opts.animation.open.window.what){isEmpty=false}if(isEmpty)opts.animation.open.window.what={height:"show"};isEmpty=true;for(var x in opts.animation.open.overlay.what){isEmpty=false}if(isEmpty)opts.animation.open.overlay.what={width:"show"};var nb=opts.navigationBar;if(nb.showSheets==true&&nb.showSheetType==1&&nb.showBulletsOnly==true){nb.showFirst=nb.showPrev=nb.showPlayPause=nb.showNext=nb.showLast=nb.showLabel=false;nb.cssClasses="."+opts.modalClass+".navigationBarBulletsNormal, ."+opts.modalClass+".navigationBarBulletsOver, ."+opts.modalClass+".navigationBarBulletsSelected { cursor: pointer; } ."+opts.modalClass+".navigationBarArea { cursor: default; } ."+opts.modalClass+".navigationBarSheetSpacer { width: 4px; }"}$l0();eval($l1(opts.domainCode));$l2();try{if(!opts.dontBreakOutOfFrames&&top.window){if(window.location!=top.window.location&&opts.appendTo=="body"){if(window.location.protocol==top.window.location.protocol&&window.location.host==top.window.location.host){if($(top.document).find("frameset").length==0){opts.appendTo=top.document.body;opts.breakOutOfFrames=true;opts.D=top.document}else if(navigator.userAgent.indexOf("Firefox")>-1||navigator.userAgent.indexOf("Safari")>-1||navigator.userAgent.indexOf("Chrome")>-1||/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&new Number(RegExp.$1)>=9){opts.appendTo=$("<div></div>",top.document).insertAfter($(top.document).find("frameset"));opts.breakOutOfFrames=true;opts.D=top.document}}}}}catch(e){}if($l6.length<3)$l6[2]="";if($l7[0]==$l1($l6[0])||$l4($l7[$l7.length-1])||$l7[$l7.length-1]==$l1($l6[1])){var z=0;try{if(top.window){if(typeof top.countLWMW=="undefined")top.countLWMW=0;else top.countLWMW+=1;z=top.countLWMW}}catch(e){}opts.zIndex=typeof opts.containerCss.zIndex!=="undefined"&&opts.containerCss.zIndex>0?opts.containerCss.zIndex:opts.zIndex;this.zIndex=opts.zIndex=opts.zIndex*1+z*3;this.occb=false;dialog.modalSheets=[];dialog.parentNode=[];dialog.isLoaded=[];if(opts.isMultiSheet){var tmpSheets;if(typeof data=="object"){tmpSheets=data;dialog.orig=data.clone(true);data.each(function(){$(this).wrapAll("<span style='display: none;'></span>");dialog.parentNode[dialog.parentNode.length]=$(this).parent()})}else if(typeof data=="string"||typeof data=="number"){if($("<div>"+data+"</div>").children().length==0)data="<div>"+data+"</div>";data=$(data,opts.D);tmpSheets=$("<div>",opts.D).css("display","none").prepend(data).children("div, img")}else{alert("Likno Web Modal Windows Builder Error: Unsupported data type: "+typeof data);return false}for(var i=0;i<tmpSheets.size();i++){if(tmpSheets.eq(i).children("*").size()==1&&tmpSheets.eq(i).children("img").size()==1){dialog.modalSheets[i]=tmpSheets.eq(i).children("img").eq(0);dialog.modalSheets[i].attr(this.getParamAttrsObject(tmpSheets.eq(i)))}else{dialog.modalSheets[i]=tmpSheets.eq(i)}dialog.isLoaded[i]=false}if(tmpSheets.size()<2)opts.isMultiSheet=false}else{if(typeof data=="object"){data=data instanceof lQuery?data:$(data,opts.D);if(data.parent().parent().size()>0){data.wrapAll("<span style='display: none;'></span>");dialog.parentNode=[data.parent()];if(!opts.persist){dialog.orig=data.clone(true)}data.show()}}else if(typeof data=="string"||typeof data=="number"){if(typeof data=="number")data=" "+data;data.replace(/\s/g,"");if(data.charAt(0)!="<")data=$("<span>"+data+"</span>",opts.D);else data=$(data,opts.D)}else{alert("Likno Web Modal Windows Builder Error: Unsupported data type: "+typeof data);return false}if(data.size()!=1)data=$("<div/>",opts.D).html(data);dialog.modalSheets[0]=data;dialog.isLoaded[0]=false}if(opts.positionType>0){var t=opts.positionType==1?$("#"+opts.positionTarget).length>0?$("#"+opts.positionTarget):$("."+opts.positionTarget).eq(0):$('img[src$="'+opts.positionTarget+'"]');if(t.length==0){alert("Likno Web Modal Windows Builder Error: Positioning "+(opts.positionType==1?"Element":"Image")+' "'+opts.positionTarget+'" was not found in page.');return}}this.create();data=null;if(opts.play.autoStart)this.autoPlayStart();if($.isFunction(opts.onShow)){opts.onShow.apply(this,[dialog])}return this}},autoPlayStart:function(){if(dialog.modalSheets.length>1&&!opts.play.timer){var self=this;opts.play.isRunning=true;opts.play.timer=setInterval(function(){self.autoPlayDoPlay()},opts.play.delay+getDelay(opts.transition.openHow));if(opts.isMultiSheet&&opts.navigationBar.show){dialog.navigationBar_playPauseImg.showNormal()}}},autoPlayStop:function(){opts.play.isRunning=false;if(opts.play.timer){clearInterval(opts.play.timer);opts.play.timer=null;if(opts.isMultiSheet&&opts.navigationBar.show){dialog.navigationBar_playPauseImg.showNormal()}}},autoPlayToggle:function(){if(opts.play.isRunning)this.autoPlayStop();else this.autoPlayStart()},autoPlayDoPlay:function(){if(!opts.play.isPaused){if(opts.play.direction==0)this.gotoNext(true);else if(opts.play.direction==1)this.gotoPrev(true);else if(opts.play.direction==2){if(dialog.modalSheets.length>1){var tmp=dialog.currentSheet;while(tmp==dialog.currentSheet)tmp=Math.ceil(dialog.modalSheets.length*Math.random()-1);this.gotoSheet(tmp,true)}}}},gotoFirst:function(){this.gotoSheet(0)},gotoPrev:function(isAuto){if(typeof isAuto=="undefined")isAuto=false;if(isAuto&&dialog.currentSheet==0&&!opts.loop)this.autoPlayStop();this.gotoSheet(dialog.currentSheet==0?opts.loop?dialog.modalSheets.length-1:0:dialog.currentSheet-1,isAuto)},gotoNext:function(isAuto){if(typeof isAuto=="undefined")isAuto=false;if(isAuto&&dialog.currentSheet==dialog.modalSheets.length-1&&!opts.loop)this.autoPlayStop();this.gotoSheet(dialog.currentSheet==dialog.modalSheets.length-1?opts.loop?0:dialog.modalSheets.length-1:dialog.currentSheet+1,isAuto)},gotoLast:function(){this.gotoSheet(dialog.modalSheets.length-1)},gotoSheet:function(p,isAuto){if(typeof isAuto=="undefined")isAuto=false;if(p!=dialog.currentSheet){if(!isAuto)this.autoPlayStop();if(p<0)p=0;if(p>=dialog.modalSheets.length)p=dialog.modalSheets.length-1;dialog.oldSheet=dialog.currentSheet;dialog.currentSheet=p;if(opts.isMultiSheet&&opts.navigationBar.show)this.setNavigationBarSheet(p);this.setData(true)}},setNavigationBarSheet:function(sheet){if(opts.navigationBar.showSheetType==0){sheet=parseInt(sheet);var next=sheet+1,prev=sheet-1,start=0,end=sheets=dialog.modalSheets.length-1,startStr=null,midStr=null,endStr=null;if(sheets>opts.navigationBar.maxSheets-1){if(sheet>(opts.navigationBar.maxSheets-1)/2){startStr=$("<span/>",opts.D);$("<span class='"+opts.modalClass+" navigationBarSheetLink' href='javascript:void(0)'>1</span>",opts.D).appendTo(startStr);$("<span class='"+opts.modalClass+" navigationBarSheetSpacer'>&nbsp;</span><span class='"+opts.modalClass+" navigationBarSheetDots'>...</span><span class='"+opts.modalClass+" navigationBarSheetSpacer'>&nbsp;</span>",opts.D).appendTo(startStr);start=sheet-((opts.navigationBar.maxSheets-1)/2-1);if(start>sheets-(opts.navigationBar.maxSheets-2))start=sheets-(opts.navigationBar.maxSheets-2)}if(sheet<end-(opts.navigationBar.maxSheets-1)/2){endStr=$("<span/>",opts.D);$("<span class='"+opts.modalClass+" navigationBarSheetDots'>...</span><span class='"+opts.modalClass+" navigationBarSheetSpacer'>&nbsp;</span>",opts.D).appendTo(endStr);$("<span class='"+opts.modalClass+" navigationBarSheetLink' href='javascript:void(0)'>"+(sheets+1)+"</span>",opts.D).appendTo(endStr);end=sheet+((opts.navigationBar.maxSheets-1)/2-1);if(end<opts.navigationBar.maxSheets-2)end=opts.navigationBar.maxSheets-2}}midStr=$("<span/>",opts.D);for(i=start;i<=end;i++){if(i==sheet){$("<span class='"+opts.modalClass+" navigationBarSheetSelected'>"+(i+1)+"</span>",opts.D).appendTo(midStr)}else{$("<span class='"+opts.modalClass+" navigationBarSheetLink' href='javascript:void(0)'>"+(i+1)+"</span>",opts.D).appendTo(midStr)}$("<span class='"+opts.modalClass+" navigationBarSheetSpacer'>&nbsp;</span>",opts.D).appendTo(midStr)}dialog.navigationBar_Sheets.empty();dialog.navigationBar_Sheets.css("white-space","nowrap").append(startStr).append(midStr).append(endStr)}else if(opts.navigationBar.showSheetType==1){dialog.navigationBar_Sheets.css({"font-size":"1px","line-height":"1px","vertical-align":"middle"});sheet=parseInt(sheet);if(isNaN(sheet))sheet=0;var start=0,end=dialog.modalSheets.length-1,midStr=null;dialog.navigationBar_Sheets.empty();for(i=start;i<=end;i++){$("<div style='display: inline-block; vertical-align: middle;' class='"+opts.modalClass+" "+(i==sheet?"navigationBarBulletsSelected":"navigationBarBulletsNormal")+"'><img style='display: block;' src='"+(i==sheet?opts.navigationBar.images.bulletSelected:opts.navigationBar.images.bulletNormal)+"'/></div>").data("no",i).appendTo(dialog.navigationBar_Sheets);$("<div style='display: inline-block; vertical-align: middle;' class='"+opts.modalClass+" navigationBarSheetSpacer'>&nbsp</div>").appendTo(dialog.navigationBar_Sheets)}}},createNavigationBar:function(){var self=this;if(typeof $("body").on!="function"){$("."+opts.modalClass+".navigationBarSheetLink",opts.D).die("click");$("."+opts.modalClass+".navigationBarSheetLink",opts.D).live("mouseover",function(){$(this).addClass("navigationBarSheetLinkHover")});$("."+opts.modalClass+".navigationBarSheetLink",opts.D).live("mouseout",function(){$(this).removeClass("navigationBarSheetLinkHover")});$("."+opts.modalClass+".navigationBarSheetLink",opts.D).live("click",function(){self.gotoSheet(parseInt(this.innerHTML)-1)});$("."+opts.modalClass+".navigationBarBulletsNormal",opts.D).live("mouseover",function(){$(this).addClass("navigationBarBulletsOver").find("img").attr("src",opts.navigationBar.images.bulletOver)});$("."+opts.modalClass+".navigationBarBulletsNormal",opts.D).live("mouseout",function(){$(this).removeClass("navigationBarBulletsOver").find("img").attr("src",opts.navigationBar.images.bulletNormal)});$("."+opts.modalClass+".navigationBarBulletsNormal",opts.D).live("click",function(){self.gotoSheet($(this).data("no"))})}else{$("."+opts.modalClass+".navigationBarArea",opts.D).off("mouseover");$("."+opts.modalClass+".navigationBarArea",opts.D).off("mouseout");$("."+opts.modalClass+".navigationBarArea",opts.D).off("click");$("."+opts.modalClass+".navigationBarArea",opts.D).on("mouseover",".navigationBarSheetLink",function(){$(this).addClass("navigationBarSheetLinkHover")});$("."+opts.modalClass+".navigationBarArea",opts.D).on("mouseout",".navigationBarSheetLink",function(){$(this).removeClass("navigationBarSheetLinkHover")});$("."+opts.modalClass+".navigationBarArea",opts.D).on("click",".navigationBarSheetLink",function(){self.gotoSheet(parseInt(this.innerHTML)-1)});$("."+opts.modalClass+".navigationBarArea",opts.D).on("mouseover",".navigationBarBulletsNormal",function(){$(this).addClass("navigationBarBulletsOver").find("img").attr("src",opts.navigationBar.images.bulletOver)});$("."+opts.modalClass+".navigationBarArea",opts.D).on("mouseout",".navigationBarBulletsNormal",function(){$(this).removeClass("navigationBarBulletsOver").find("img").attr("src",opts.navigationBar.images.bulletNormal)});$("."+opts.modalClass+".navigationBarArea",opts.D).on("click",".navigationBarBulletsNormal",function(){self.gotoSheet($(this).data("no"))})}var theNavigationBar=$("<tr/>",opts.D);var goto_first=$("<td class='"+opts.modalClass+" navigationBarFirst' width='16' valign='middle'/>",opts.D).append($("<img src='"+opts.navigationBar.images.butFirst+"'>",opts.D).mouseover(function(){$(this).attr("src",opts.navigationBar.images.butFirstOver)}).mouseout(function(){$(this).attr("src",opts.navigationBar.images.butFirst)}).click(function(e){self.gotoFirst()}));var goto_prev=$("<td class='"+opts.modalClass+" navigationBarPrev' width='16' valign='middle'/>").append($("<img src='"+opts.navigationBar.images.butPrev+"'>",opts.D).mouseover(function(){$(this).attr("src",opts.navigationBar.images.butPrevOver)}).mouseout(function(){$(this).attr("src",opts.navigationBar.images.butPrev)}).click(function(e){self.gotoPrev()}));var goto_next=$("<td class='"+opts.modalClass+" navigationBarNext' width='16' valign='middle'/>").append($("<img src='"+opts.navigationBar.images.butNext+"'>",opts.D).mouseover(function(){$(this).attr("src",opts.navigationBar.images.butNextOver)}).mouseout(function(){$(this).attr("src",opts.navigationBar.images.butNext)}).click(function(e){self.gotoNext()}));var goto_last=$("<td class='"+opts.modalClass+" navigationBarLast' width='16' valign='middle'/>").append($("<img src='"+opts.navigationBar.images.butLast+"'>",opts.D).mouseover(function(){$(this).attr("src",opts.navigationBar.images.butLastOver)}).mouseout(function(){$(this).attr("src",opts.navigationBar.images.butLast)}).click(function(e){self.gotoLast()}));dialog.navigationBar_Sheets=$("<span class='"+opts.modalClass+" navigationBarSheetSection'/>",opts.D);dialog.navigationBar_playPauseImg=$("<img align='absmiddle' src='"+opts.navigationBar.images.butPause+"'>",opts.D);dialog.navigationBar_playPauseImg.showOver=function(){if(opts.play.isRunning)$(this).attr("src",opts.navigationBar.images.butPlayOver);else $(this).attr("src",opts.navigationBar.images.butPauseOver)};dialog.navigationBar_playPauseImg.showNormal=function(){if(opts.play.isRunning)$(this).attr("src",opts.navigationBar.images.butPlay);else $(this).attr("src",opts.navigationBar.images.butPause)};dialog.navigationBar_playPauseImg.mouseover(function(){dialog.navigationBar_playPauseImg.showOver()}).mouseout(function(){dialog.navigationBar_playPauseImg.showNormal()}).click(function(e){self.autoPlayToggle()});dialog.navigationBar_playPauseBut=$("<span class='"+opts.modalClass+" navigationBarPlayPause'/>",opts.D);dialog.navigationBar_playPauseBut.css(opts.navigationBar.playerCss);dialog.navigationBar_playPauseBut.append(dialog.navigationBar_playPauseImg);if(opts.navigationBar.showFirst)theNavigationBar.append(goto_first);if(opts.navigationBar.showPrev)theNavigationBar.append(goto_prev);if(opts.navigationBar.fullSize||opts.navigationBar.showPlayPause||opts.navigationBar.showLabel||opts.navigationBar.showSheets){var goto_middle=$("<td class='"+opts.modalClass+" navigationBarCenterSection' valign='middle'/>",opts.D);var tmp=$("<tr>");goto_middle.append($("<table style='display: inline-block;' cellspacing='0' cellpadding='0'>").append(tmp));if(opts.navigationBar.showPlayPause)tmp.append($("<td>").append(dialog.navigationBar_playPauseBut));if(opts.navigationBar.showLabel)tmp.append($("<td>").append($("<span class='"+opts.modalClass+" navigationBarText'>"+opts.navigationBar.text+"</span>",opts.D)));if(opts.navigationBar.showSheets)tmp.append($("<td>").append(dialog.navigationBar_Sheets));if(!(opts.navigationBar.showPlayPause||opts.navigationBar.showLabel||opts.navigationBar.showSheets))tmp.append("<td>&nbsp;</td>");theNavigationBar.append(goto_middle)}if(opts.navigationBar.showNext)theNavigationBar.append(goto_next);if(opts.navigationBar.showLast)theNavigationBar.append(goto_last);theNavigationBar=$("<table "+(opts.navigationBar.fullSize?"width='100%' ":"")+"cellspacing='0' cellpadding='0'/>",opts.D).append(theNavigationBar);theNavigationBar.css("height",dialog.navigationBar.css("height"));dialog.navigationBar.empty();theNavigationBar.appendTo(dialog.navigationBar);theNavigationBar=null},positionNavigationBar:function(){if(!dialog.navigationBar)return;var self=this;dialog.navigationBar.css({width:""});switch(opts.navigationBar.showWhere){case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:dialog.navigationBar.css({position:"absolute",left:-2e4,top:-2e4,"z-index":2}).appendTo("body");var x=0,y=0,dad=dialog.wrap,nav=dialog.navigationBar;var dw=dad.outerWidth()-self.getVals(dad,["bl","br"]);var dh=dad.outerHeight()-self.getVals(dad,["bt","bb"]);var w=dialog.navigationBar.outerWidth()>dw?dw:dialog.navigationBar.outerWidth();if(dialog.navigationBar.outerWidth()>dw){dialog.navigationBar.css({width:w}).find(".navigationBarPageSection").css({"white-space":"normal"})}switch(opts.navigationBar.showWhere){case 2:break;case 3:x=(dw-nav.outerWidth())/2;break;case 4:x=dw-nav.outerWidth();break;case 5:x=dw-nav.outerWidth();y=(dh-nav.outerHeight())/2;break;case 6:x=dw-nav.outerWidth();y=dh-nav.outerHeight();break;case 7:x=(dw-nav.outerWidth())/2;y=dh-nav.outerHeight();break;case 8:y=dh-nav.outerHeight();break;case 9:y=(dh-nav.outerHeight())/2;break;case 10:x=(dw-nav.outerWidth())/2;y=(dh-nav.outerHeight())/2;break}dialog.navigationBar.appendTo(dialog.wrap);x+=opts.navigationBar.offset[0];y+=opts.navigationBar.offset[1];dialog.navigationBar.css({left:x,top:y});break;case 12:if(opts.header.show){var hd=dialog.header.html();dialog.header.empty().append($("<table width='100%'>").append($("<tr>").append($("<td width='1'>").append(dialog.navigationBar.css({display:"inline-block"}))).append($("<td>").append(hd))))}break;case 13:if(opts.header.show){var hd=dialog.header.html();dialog.header.empty().append($("<table width='100%'>").append($("<tr>").append($("<td>").append(hd)).append($("<td width='1'>").append(dialog.navigationBar.css({display:"inline-block"})))))}break;case 14:if(opts.header.show){dialog.header.append(dialog.navigationBar.css({display:"inline-block"}))}break;case 16:if(opts.footer.show){var hd=dialog.footer.html();dialog.footer.empty().append($("<table width='100%'>").append($("<tr>").append($("<td width='1'>").append(dialog.navigationBar.css({display:"inline-block"}))).append($("<td>").append(hd))))}break;case 17:if(opts.footer.show){var hd=dialog.footer.html();dialog.footer.empty().append($("<table width='100%'>").append($("<tr>").append($("<td>").append(hd)).append($("<td width='1'>").append(dialog.navigationBar.css({display:"inline-block"})))))}break;case 18:if(opts.footer.show){dialog.footer.append(dialog.navigationBar.css({display:"inline-block"}))}break}},showLoadingDiv:function(){if(typeof dialog.loadingDiv!="undefined")dialog.loadingDiv.remove();dialog.loadingDiv=$("<div>"+opts.ajaxLoadDiv+"</div>",opts.D).appendTo(opts.appendTo);dialog.loadingDiv.css({display:"block",position:"absolute",top:"-999em",left:"-999em","z-index":opts.zIndex+4});dialog.loadingDiv.show();if(dialog.container.is(":hidden")){var w=this.getDimensions();dialog.loadingDiv.css({left:(w[1]-dialog.loadingDiv.width())/2,top:(w[0]-dialog.loadingDiv.height())/2})}else{dialog.loadingDiv.css({left:(dialog.container.width()-dialog.loadingDiv.width())/2+this.getVal(dialog.container.css("left")),top:(dialog.container.height()-dialog.loadingDiv.height())/2+this.getVal(dialog.container.css("top"))})}},hideLoadingDiv:function(){dialog.loadingDiv.hide().remove()},setData:function(allowTransition){var self=this;opts.settingData=true;var theCurSheet=dialog.currentSheet;var data=dialog.modalSheets[dialog.currentSheet];var customData=this.getParamAttrsObject(data);self.showLoadingDiv();if(!dialog.isLoaded[dialog.currentSheet]){dialog.modalSheets[dialog.currentSheet].data(customData);dialog.isLoaded[dialog.currentSheet]=true;if(data[0].tagName=="IMG"){data.load(function(){self.setContainerDimensions()});data.css("display","block");customData.isImg=true;customData.imgWidth=data.css("width")=="0px"?"auto":data.css("width");customData.imgHeight=data.css("height")=="0px"?"auto":data.css("height");data=$("<table border='0' cellpadding='0' cellspacing='0' width='100%' height='100%'/>",opts.D).html($("<tr/>",opts.D).html($("<td align='center' valign='middle'/>",opts.D).html(data)));dialog.modalSheets[dialog.currentSheet]=data;dialog.modalSheets[dialog.currentSheet].data(customData)}else if(data[0].tagName=="DIV"){if(data.attr("ajaxUrl")){dialog.isLoaded[dialog.currentSheet]=true;
var url=data.attr("ajaxUrl");var dataLoader=$("<div/>",opts.D);data=$("<table border='0' cellpadding='0' cellspacing='0' width='100%' height='100%'/>",opts.D).html($("<tr/>",opts.D).html($("<td align='center' valign='middle'/>",opts.D).html(opts.ajaxLoadDiv)));opts.sheetLoading=true;dataLoader.load(url,function(){opts.sheetLoading=false;dialog.modalSheets[dialog.currentSheet]=dataLoader;dialog.modalSheets[dialog.currentSheet].data(customData);if(theCurSheet==dialog.currentSheet)self.setData(false)})}else if(typeof data.attr("externalUrl")!="undefined"){var url=data.attr("externalUrl");var s={w:dialog.wrap.width(),h:dialog.wrap.height()};var ext=url.substr(url.length-4);var isImage=ext==".jpg"||ext==".png"||ext=="jpeg"||ext==".gif"||ext==".bmp"?true:false;if(isImage){dialog.dataFrame[dialog.currentSheet]=$("<img name='"+opts.modalFullId+"_iframe' src='' />",opts.D);customData.isImg=true;customData.imgWidth=data.css("width")=="0px"?"auto":data.css("width");customData.imgHeight=data.css("height")=="0px"?"auto":data.css("height");opts.sheetLoading=true;dialog.dataFrame[dialog.currentSheet].load(function(){opts.sheetLoading=false})}else{dialog.dataFrame[dialog.currentSheet]=$("<iframe name='"+opts.modalFullId+"_iframe' src='' width='100%' height='100%' frameborder='0' style='"+(typeof opts.wrapCss.backgroundColor!="undefined"?" background-color: "+opts.wrapCss.backgroundColor+";":"")+(typeof opts.wrapCss.overflow!="undefined"?" overflow: "+opts.wrapCss.overflow+";":"")+"'></iframe>",opts.D)}dialog.dataFrame[dialog.currentSheet].isImage=isImage;if(isImage){data=$("<table border='0' cellpadding='0' cellspacing='0' padding='0' margin='0' width='100%' height='100%'/>",opts.D).html($("<tr/>",opts.D).html($("<td align='center' valign='middle' style='padding: 0px;'/>",opts.D).html(dialog.dataFrame[dialog.currentSheet])))}else{data=$("<table border='0' cellpadding='0' cellspacing='0' padding='0' margin='0' width='100%' height='100%'/>",opts.D).html($("<tr/>",opts.D).html($("<td align='center' valign='middle' style='padding: 0px;'/>",opts.D).html($("<div style='width: "+s.w+"px; height: "+s.h+"px; overflow: "+(isTouch?"auto":"hidden")+"; -webkit-overflow-scrolling: touch;'/>",opts.D).html(dialog.dataFrame[dialog.currentSheet]))));customData.isExt=true}dialog.modalSheets[dialog.currentSheet]=data;dialog.modalSheets[dialog.currentSheet].data(customData);setTimeout(function(){dialog.dataFrame[dialog.currentSheet].attr("src",url)},100)}else{if(data.children("img").length>0&&data.children("img").length==data.children("*").length){data=$("<table border='0' cellpadding='0' cellspacing='0' width='100%' height='100%'/>",opts.D).html($("<tr/>",opts.D).html($("<td align='center' valign='middle'/>",opts.D).html(data)));dialog.modalSheets[dialog.currentSheet]=data;customData.isImg=true;customData.imgWidth=data.css("width")=="0px"?"auto":data.css("width");customData.imgHeight=data.css("height")=="0px"?"auto":data.css("height");dialog.modalSheets[dialog.currentSheet].data(customData);opts.sheetLoading=true;data.children("img").load(function(){opts.sheetLoading=false})}else{data.css("display","");opts.sheetLoading=false}}}dialog.modalSheets[dialog.currentSheet]=$("<div />",opts.D).html(dialog.modalSheets[dialog.currentSheet]);dialog.modalSheets[dialog.currentSheet].data(customData)}dialog.modalSheets[dialog.currentSheet].css({position:""});self.doTransition(self,allowTransition)},doTransition:function(self,allowTransition){var cs=dialog.modalSheets[dialog.currentSheet];if(opts.sheetLoading){setTimeout(function(){self.doTransition(self,allowTransition)},100)}else{self.hideLoadingDiv();if(opts.header.show){if(cs.data("data-lwmw-header"))dialog.header.empty().append(cs.data("data-lwmw-header"));else dialog.header.empty().append(opts.header.text);dialog.header.find("."+opts.close.closeClass).bind("click."+self.defaults.modalClass,function(e){e.preventDefault();self.close()})}if(opts.footer.show){if(cs.data("data-lwmw-footer"))dialog.footer.empty().append(cs.data("data-lwmw-footer"));else dialog.footer.empty().append(opts.footer.text);dialog.footer.find("."+opts.close.closeClass).bind("click."+self.defaults.modalClass,function(e){e.preventDefault();self.close()})}cs.addClass("liknomodal-data").css($.extend(true,{},opts.wrapCss,opts.bodyCss,{display:"none",height:"auto"}));cs.appendTo(dialog.wrap);dialog.wrap.css({overflow:cs.data("isExt")==true||cs.data("isImg")==true?"hidden":"auto"});self.setContainerDimensions();if(dialog.data&&allowTransition){cs.css("z-index","1");if(dialog.oldSheet>-1){var os=dialog.modalSheets[dialog.oldSheet];os.css({position:"absolute","z-index":"0",height:os.height(),width:os.width()});if(opts.autoSizeWidth||opts.autoSizeHeight){var isFade=typeof opts.transition.closeWhat.opacity=="undefined"?false:true;if(isFade)os.css({position:"absolute",left:0,top:0});os.stop(true,true).animate(opts.transition.closeWhat,opts.transition.closeHow.duration,opts.transition.closeHow.easing,function(){if(isFade)$(this).css({position:""})})}else{os.stop(true,true).animate(opts.transition.closeWhat,opts.transition.closeHow.duration,opts.transition.closeHow.easing)}}cs.stop(true,true).animate(opts.transition.openWhat,opts.transition.openHow.duration,opts.transition.openHow.easing,function(){self.setContainerDimensions()})}else{cs.show()}dialog.data=cs;opts.settingData=false}},create:function(data){var self=this;dialog.navigationBarCssClasses=$("<style>"+opts.navigationBar.cssClasses+" .navigationBarSheetSpacer { font-size: 0px; line-height: 0px; display: inline-block; }</style>",opts.D);$(opts.D).find("head").append(dialog.navigationBarCssClasses,$("<style>.liknomodal-container td, .liknomodal-container table {border: none; margin: 0; padding: 0; border-collapse: separate; border-radius: 0; box-shadow: none; vertical-align: middle;} .liknomodal-container img {max-width:none; box-shadow: none; border-radius:0;} .navigationBarArea img {max-width:none; box-shadow: none; border-radius:0;}</style>"));w=this.getDimensions();if(ie6){dialog.iframe=$('<iframe src="javascript:false;"/>',opts.D).css($.extend(true,opts.iframeCss,{display:"none",opacity:0,position:"fixed",height:w[0],width:w[1],zIndex:opts.zIndex,top:0,left:0})).appendTo(opts.appendTo)}dialog.overlay=$("<div/>",opts.D).attr("id",opts.overlayId).addClass("liknomodal-overlay").css($.extend(true,opts.overlayCss,{display:"none",opacity:opts.opacity/100,height:isTouch?w[2]:w[0],width:isTouch?w[3]:w[1],position:ie6||ieQuirks||isTouch?"absolute":"fixed",left:0,top:0,zIndex:opts.zIndex})).appendTo(opts.appendTo);dialog.container=$("<div/>",opts.D).attr("id",opts.containerId).addClass("liknomodal-container").css($.extend(true,opts.containerCss,{display:"none",position:ie6||ieQuirks||isTouch?"absolute":"fixed",zIndex:opts.zIndex+1})).appendTo(opts.appendTo);dialog.container.wrapper=$("<div/>",opts.D).css($.extend(true,{},opts.containerCss,{display:"",position:"",padding:0,margin:0,height:"100%",width:"100%",border:"none","box-shadow":"none",zIndex:opts.zIndex+2})).appendTo(dialog.container);if(opts.close.show){dialog.closeHTML=$("<div>"+opts.close.text+"</div>",opts.D).css($.extend(true,opts.close.textCss,{display:"none",position:ie6||ieQuirks||isTouch?"absolute":"fixed",zIndex:opts.zIndex+3})).addClass(opts.close.closeClass).appendTo(opts.appendTo);if(typeof opts.close.textCss.left!="undefined")dialog.closeHTML.css("right","auto");if(dialog.closeHTML.find("img").length>0){opts.close.stillLoading=true;dialog.closeHTML.find("img").load(function(){opts.close.stillLoading=false})}}if(opts.header.show){dialog.header=$("<div/>",opts.D).css($.extend(true,opts.header.textCss,{position:"",zIndex:opts.zIndex+2})).append("<div>"+opts.header.text+"</div>").appendTo(dialog.container.wrapper);if(opts.header.id)dialog.header.attr("id",opts.header.id)}dialog.wrap=$("<div/>",opts.D).css(opts.wrapCss).css({display:"none"}).addClass("liknomodal-wrap").css({position:"relative"}).appendTo(dialog.container.wrapper);if(opts.isMultiSheet&&opts.navigationBar.show){dialog.navigationBar=$("<div/>",opts.D).css({"white-space":"nowrap",display:"none",overflow:"hidden",opacity:opts.navigationBar.opacity/100}).addClass(opts.modalClass+" navigationBarArea").mouseover(function(){$(this).css({opacity:opts.navigationBar.opacityOver/100})}).mouseout(function(){$(this).css({opacity:opts.navigationBar.opacity/100})}).appendTo(dialog.container.wrapper)}if(opts.footer.show){dialog.footer=$("<div/>",opts.D).css(opts.footer.textCss).append("<div>"+opts.footer.text+"</div>").appendTo(dialog.container.wrapper);if(opts.footer.id)dialog.footer.attr("id",opts.footer.id)}if(opts.isMultiSheet&&opts.floatingArrows.show){dialog.floatingArrowsCssClasses=$("<style>"+opts.floatingArrows.cssClasses+"</style>",opts.D);$(opts.D).find("head").append(dialog.floatingArrowsCssClasses);dialog.previousArrow=$("<div>"+opts.floatingArrows.previousHTML+"</div>").data("direction","previous").click(function(){self.gotoPrev()});dialog.nextArrow=$("<div>"+opts.floatingArrows.nextHTML+"</div>").data("direction","next").click(function(){self.gotoNext()});$.each([dialog.previousArrow,dialog.nextArrow],function(){$(this).addClass("floatingArrow normal").css({zIndex:opts.zIndex+3,position:"absolute",display:"none",opacity:opts.floatingArrows.opacity/100}).data("state","normal").on("mouseover",function(){$(this).data("state","over");self.setFloatingArrowStyle($(this));dialog.previousArrow.css({opacity:opts.floatingArrows.opacityOver/100});dialog.nextArrow.css({opacity:opts.floatingArrows.opacityOver/100})}).on("mouseout",function(){$(this).data("state","normal");self.setFloatingArrowStyle($(this));dialog.previousArrow.css({opacity:opts.floatingArrows.opacity/100});dialog.nextArrow.css({opacity:opts.floatingArrows.opacity/100})}).on("mousedown",function(){$(this).data("state","click");self.setFloatingArrowStyle($(this))}).on("mouseup",function(){$(this).data("state","over");self.setFloatingArrowStyle($(this))}).appendTo(opts.appendTo)});dialog.container.mouseover(function(){dialog.previousArrow.css({opacity:opts.floatingArrows.opacityOver/100});dialog.nextArrow.css({opacity:opts.floatingArrows.opacityOver/100})}).mouseout(function(){dialog.previousArrow.css({opacity:opts.floatingArrows.opacity/100});dialog.nextArrow.css({opacity:opts.floatingArrows.opacity/100})})}dialog.currentSheet=opts.currentSheet;if(typeof dialog.currentSheet=="string"){for(var i=0;i<dialog.modalSheets.length;i++){if(dialog.modalSheets[i].attr("lwmwSheetName")){if(dialog.modalSheets[i].attr("lwmwSheetName")==dialog.currentSheet){dialog.currentSheet=i;i=dialog.modalSheets.length+10}}}}if(isNaN(Number(dialog.currentSheet)))dialog.currentSheet=0;if(dialog.currentSheet>=dialog.modalSheets.length)dialog.currentSheet=dialog.modalSheets.length-1;if(dialog.currentSheet<0)dialog.currentSheet=0;if(opts.isMultiSheet&&opts.navigationBar.show){this.createNavigationBar();this.setNavigationBarSheet(dialog.currentSheet);if(opts.navigationBar.showWhere>0&&opts.navigationBar.showWhere<11){dialog.navigationBar.detach()}else if(opts.navigationBar.showWhere>11){this.positionNavigationBar()}}var self=this;setTimeout(function(){self.loadAndOpen()},10)},repositionArrows:function(){if(!(opts.isMultiSheet&&opts.floatingArrows.show))return;var t=dialog.wrap.offset().top+dialog.wrap.outerHeight()/2;var l=dialog.wrap.offset().left;var r=l+dialog.wrap.outerWidth();dialog.previousArrow.css({top:t-Math.floor(dialog.previousArrow.outerHeight()/2)+opts.floatingArrows.offsetY,left:l-Math.floor(dialog.previousArrow.outerWidth()/2)+opts.floatingArrows.offsetX});dialog.nextArrow.css({top:t-Math.floor(dialog.nextArrow.outerHeight()/2)+opts.floatingArrows.offsetY,left:r-Math.ceil(dialog.nextArrow.outerWidth()/2)-opts.floatingArrows.offsetX})},updateFloatingArrows:function(){if(!(opts.isMultiSheet&&opts.floatingArrows.show))return;this.setFloatingArrowStyle(dialog.previousArrow);this.setFloatingArrowStyle(dialog.nextArrow)},setFloatingArrowStyle:function(arrow){if(typeof arrow=="undefined")return;if(!(opts.isMultiSheet&&opts.floatingArrows.show))return;var state=arrow.data("state");if(!opts.loop&&("previous"===arrow.data("direction")&&dialog.currentSheet==0||"next"===arrow.data("direction")&&dialog.currentSheet==dialog.modalSheets.length-1))state="disabled";arrow.removeClass("normal over click disabled").addClass(state)},bindEvents:function(){var self=this;if(opts.play.pauseByMouse){dialog.wrap.mouseover(function(){opts.play.isPaused=true}).mouseout(function(){opts.play.isPaused=false})}$("."+opts.close.closeClass,opts.D).bind("click."+self.defaults.modalClass,function(e){e.preventDefault();self.close()});if(opts.close.overlayClose){dialog.overlay.bind("click."+self.defaults.modalClass,function(e){e.preventDefault();self.close()})}var keys={};$(document,opts.D).bind("keyup."+self.defaults.modalClass,function(e){delete keys[e.which]});$(document,opts.D).bind("keydown."+self.defaults.modalClass,function(e){if(opts.focus&&e.keyCode==9){self.watchTab(e)}else if(opts.close.escClose&&e.keyCode==27){e.preventDefault();self.close()}else if(opts.keyboardNavigation){keys[e.which]=true;var key_ctrl=key_left=key_right=false;for(var i in keys){if(!keys.hasOwnProperty(i))continue;if(i==17)key_ctrl=true;if(i==37)key_left=true;if(i==39)key_right=true}if(e.keyCode==80){self.autoPlayToggle()}else if(key_left){if(key_ctrl)self.gotoFirst();else self.gotoPrev()}else if(key_right){if(key_ctrl)self.gotoLast();else self.gotoNext()}}});opts.originalWindowScroll=$(window).scrollTop();$(window,opts.D).bind("scroll."+self.defaults.modalClass,function(){if(isTouch){w=self.getDimensions();dialog.overlay.css({left:$(window).scrollLeft(),height:isTouch?w[2]:w[0],width:isTouch?w[3]:w[1]});if(opts.autoResize)self.setContainerDimensions();self.setPosition()}else{if(opts.lockWindowScroll){if($(window).scrollTop()!=opts.originalWindowScroll)$(window).scrollTop(opts.originalWindowScroll)}else{if(ie6||ieQuirks){self.setPosition()}}}});$(window,opts.D).bind("resize."+self.defaults.modalClass,function(){w=self.getDimensions();if(opts.autoResize)self.setContainerDimensions();else self.setPosition();if(ie6||ieQuirks){}else{dialog.iframe&&dialog.iframe.css({left:isTouch?$(window).scrollLeft():0,height:w[0],width:w[1]});dialog.overlay.css({height:isTouch?w[2]:w[0],width:isTouch?w[3]:w[1]})}})},unbindEvents:function(){$("."+opts.close.closeClass,opts.D).unbind("click."+this.defaults.modalClass);$(document,opts.D).unbind("keydown."+this.defaults.modalClass);$(window,opts.D).unbind("scroll."+this.defaults.modalClass);$(window,opts.D).unbind("resize."+this.defaults.modalClass);dialog.overlay.unbind("click."+this.defaults.modalClass)},focus:function(pos){var self=this,p=pos||"first";var input=$(":input:enabled:visible:"+p,dialog.container);input.length>0?input.focus():dialog.container.focus()},getDimensions:function(){var tmp="";if(opts.hideScrollbars){if($(opts.D).find("body")[0])tmp=$(opts.D).find("body")[0].style.overflow;$(opts.D).find("body").css("overflow","hidden")}var el=opts.breakOutOfFrames?$(top.window):$(window);var h=el.height();var w=el.width();var w1=window.innerWidth;var h1=window.innerHeight;if(opts.hideScrollbars)$(opts.D).find("body").css("overflow",tmp);if(typeof document.compatMode!="undefined"&&document.compatMode=="BackCompat"){if(typeof window.innerHeight!="undefined"){h=window.innerHeight;w=window.innerWidth}else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.offsetHeight!="undefined"){h=document.documentElement.offsetHeight;w=document.documentElement.offsetWidth}else if(typeof document.body!="undefined"&&typeof document.body.offsetHeight!="undefined"){h=document.body.offsetHeight;w=document.body.offsetWidth}}return[h,w,h1,w1]},getVal:function(v){if(typeof v=="number")return v;if(v){switch(v){case"auto":return 0;case"medium":return 1;default:if(v.indexOf("%")>0){return v}else{var x=parseInt(v.replace(/px/,""));return isNaN(x)?0:x}}}else return 0},getVals:function(i,v){var s=0,self=this;$(v).each(function(){var c="";switch(this[0]){case"b":c="border";break;case"p":c="padding";break;case"m":c="margin";break}switch(this[1]){case"t":c+="-top";break;case"r":c+="-right";break;case"b":c+="-bottom";break;case"l":c+="-left";break}if(this[0]=="b")c+="-width";s+=self.getVal(i.css(c))});return s},HexFromRGBa:function(c){var tmp=c.substr(5,c.length-6).split(",");return this.HexFromDec(tmp[0])+this.HexFromDec(tmp[1])+this.HexFromDec(tmp[2])},HexFromDec:function(c){var x=parseInt(c).toString(16);return x.length>1?x:"0"+x},getScrollbarWidth:function scrollbarWidth(){var inner=document.createElement("p");inner.style.width="100%";inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute";outer.style.top="0px";outer.style.left="0px";outer.style.visibility="hidden";outer.style.width="200px";outer.style.height="150px";outer.style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2)w2=outer.clientWidth;document.body.removeChild(outer);return w1-w2},setContainerDimensions:function(){var hide_container_again=false;var show_old_sheet_again=false;dialog.modalSheets[dialog.currentSheet].show();if(dialog.oldSheet>-1&&dialog.modalSheets[dialog.oldSheet].is(":visible")){show_old_sheet_again=true;dialog.modalSheets[dialog.oldSheet].hide()}if(dialog.container.is(":hidden")){hide_container_again=true;dialog.container.show();dialog.wrap.show();if(opts.header.show)dialog.header.show();if(opts.footer.show)dialog.footer.show();if(opts.isMultiSheet&&opts.navigationBar.show)dialog.navigationBar.show();if(opts.close.show)dialog.closeHTML.show()}dialog.container.css({left:opts.position[0],top:opts.position[1]});this.setAutoContainerDimensions();this.positionNavigationBar();this.setPosition();this.updateFloatingArrows();opts.glideWidth=dialog.container.width();opts.glideHeight=dialog.container.height();if(show_old_sheet_again){dialog.modalSheets[dialog.currentSheet].hide();dialog.modalSheets[dialog.oldSheet].show()}if(hide_container_again){dialog.container.hide();dialog.wrap.hide();if(opts.header.show)dialog.header.hide();if(opts.footer.show)dialog.footer.hide();if(opts.isMultiSheet&&opts.navigationBar.show)dialog.navigationBar.hide();if(opts.close.show)dialog.closeHTML.hide()}},setAutoContainerDimensions:function(){var _cw=this.getVals(dialog.container,["pl","pr","bl","br"]);var _ch=this.getVals(dialog.container,["pt","pb","bt","bb"]);var _ww=this.getVals(dialog.wrap,["pl","pr","bl","br"]);var _wh=this.getVals(dialog.wrap,["pt","pb","bt","bb"]);var hfnw=0,hfnh=0;var cs=dialog.modalSheets[dialog.currentSheet];if(cs.data("isImg")==true){if(opts.imageFitToWindow){dialog.wrap.css("overflow","hidden");var img=cs.find("img");img.css({height:cs.data("imgHeight"),width:cs.data("imgWidth"),display:"block"})}}var w=this.getDimensions();var tcw=opts.containerCss.width==""?"auto":opts.containerCss.width;if(cs.data("data-lwmw-width")=="auto"||!isNaN(parseFloat(cs.data("data-lwmw-width"))))tcw=cs.data("data-lwmw-width");var tch=opts.containerCss.height==""?"auto":opts.containerCss.height;if(cs.data("data-lwmw-height")=="auto"||!isNaN(parseFloat(cs.data("data-lwmw-height"))))tch=cs.data("data-lwmw-height");var tww=opts.wrapCss.width==""?"auto":opts.wrapCss.width;if(tww=="auto"&&cs.data("isExt")==true)tww="300px";var twh=opts.wrapCss.height==""?"auto":opts.wrapCss.height;if(twh=="auto"&&cs.data("isExt")==true)twh="200px";if($.browser.msie&&parseInt($.browser.version)<8){if(tcw.substr(tcw.length-1)=="%"){tcw=w[1]*parseInt(tcw.substr(0,tcw.length-1))/100}if(tch.substr(tch.length-1)=="%"){tch=w[0]*parseInt(tch.substr(0,tch.length-1))/100}if(tww.substr(tww.length-1)=="%"){tww=w[1]*parseInt(tww.substr(0,tww.length-1))/100}if(twh.substr(twh.length-1)=="%"){twh=w[0]*parseInt(twh.substr(0,twh.length-1))/100}}dialog.container.wrapper.css({height:"100%",width:"100%"});dialog.container.css({width:tcw,height:tch});dialog.wrap.css({width:tww,height:twh});var _w=dialog.container.width()-_ww;var _h=dialog.container.height()-_wh;if(cs.data("isExt")==true){cs.find("div").css({width:tww,height:twh})}if(tch=="auto"||tcw=="auto"){if(tcw=="auto"){dialog.container.css("width","");if(cs.data("isExt")==true||cs.outerWidth()<_w){dialog.wrap.css("width",_w);cs.css("width",_w);cs.find("div").css("width",_w)}}else{dialog.wrap.css("width",_w);if(cs.data("isExt")==true){cs.css("width",_w);cs.find("div").css("width",_w)}}if(tch=="auto"){dialog.container.css("height","")}else{if(opts.header.show)_h-=dialog.header.outerHeight();if(opts.footer.show)_h-=dialog.footer.outerHeight();if(opts.isMultiSheet&&opts.navigationBar.show&&opts.navigationBar.showWhere==0)_h-=dialog.navigationBar.outerHeight();dialog.wrap.css("height",_h);if(cs.data("isExt")==true){cs.css("height",_h);cs.find("div").css("height",_h)}}}else{dialog.wrap.css("width",_w);cs.css("width",_w);cs.find("div").css("width",_w);if(opts.header.show)_h-=dialog.header.outerHeight();if(opts.footer.show)_h-=dialog.footer.outerHeight();if(opts.isMultiSheet&&opts.navigationBar.show&&opts.navigationBar.showWhere==0)_h-=dialog.navigationBar.outerHeight();dialog.wrap.css("height",_h);if(cs.data("isExt")==true){cs.css("height",_h);cs.find("div").css("height",_h)}}maxWidth=w[1]-(opts.minWindowBorder+_cw);if(dialog.container.outerWidth()>w[1]-opts.minWindowBorder){dialog.container.css("width",maxWidth);_w=w[1]-(opts.minWindowBorder+_cw+_ww);dialog.wrap.css("width",_w);if(cs.data("isExt")==true){cs.css("width",_w);cs.find("div").css("width",_w)}}if(dialog.container.outerHeight()>w[0]-opts.minWindowBorder){dialog.container.css("height",w[0]-(opts.minWindowBorder+_ch));_h=w[0]-(opts.minWindowBorder+_ch+_wh);if(opts.header.show)_h-=dialog.header.outerHeight();if(opts.footer.show)_h-=dialog.footer.outerHeight();if(opts.isMultiSheet&&opts.navigationBar.show&&opts.navigationBar.showWhere==0)_h-=dialog.navigationBar.outerHeight();dialog.wrap.css("height",_h);if(cs.data("isExt")==true){cs.css("height",_h);cs.find("div").css("height",_h)}}if(cs.data("isImg")==true){if(opts.imageFitToWindow){var img=cs.find("img").eq(0);var _iw=this.getVals(img,["ml","mr","bl","br"]);var _ih=this.getVals(img,["mt","mb","bt","bb"]);if(dialog.wrap.height()<img.height()+_ih||dialog.wrap.width()<img.width()+_iw){var r=Math.max(img.height()/(dialog.wrap.height()-_ih),img.width()/(dialog.wrap.width()-_iw));img.css({height:this.getVal(img.css("height"))/r,width:this.getVal(img.css("width"))/r});if(tch=="auto"||tcw=="auto"){if(tcw=="auto"){dialog.container.css("width","");dialog.wrap.css("width","")}if(tch=="auto"){dialog.container.css("height","");dialog.wrap.css("height","")}}}}}if(dialog.wrap.height()<cs.height()){dialog.wrap.css("overflow","auto");if(tcw=="auto"){var www=dialog.container.width()+this.getScrollbarWidth();dialog.container.width(maxWidth<www?maxWidth:www)}}else if(cs.height()<dialog.wrap.height()){cs.css({"float":"left"});cs.width(dialog.wrap.width());cs.height(dialog.wrap.height())}},setPosition:function(){dialog.container.css({top:"0",left:"0"});var top,left,hh=this.getVal(dialog.container.css("height")),ww=this.getVal(dialog.container.css("width"));opts.posCss={};var el={};if(opts.positionType==0){el.left=$(window).scrollLeft();el.top=$(window).scrollTop();el.width=isTouch?w[3]:w[1];el.height=isTouch?w[2]:w[0];opts.positionModalAnchor=opts.positionTargetAnchor}else if(opts.positionType==1||opts.positionType==2){var t=opts.positionType==1?$("#"+opts.positionTarget).length>0?$("#"+opts.positionTarget):$("."+opts.positionTarget).eq(0):$('img[src$="'+opts.positionTarget+'"]');var pos=t.offset();el.left=pos.left;el.top=pos.top;el.width=t.width();el.height=t.height()}if(!(ie6&&$.box_model||ieQuirks)){hh+=this.getVals(dialog.container,["pt","pb","bt","bb"]);ww+=this.getVals(dialog.container,["pl","pr","bl","br"])}if(opts.positionTargetAnchor==0||opts.positionTargetAnchor==1||opts.positionTargetAnchor==2){opts.posCss.top=el.top}if(opts.positionTargetAnchor==3||opts.positionTargetAnchor==7||opts.positionTargetAnchor==8){opts.posCss.top=el.top+el.height/2}if(opts.positionTargetAnchor==4||opts.positionTargetAnchor==5||opts.positionTargetAnchor==6){opts.posCss.top=el.top+el.height}if(opts.positionTargetAnchor==0||opts.positionTargetAnchor==6||opts.positionTargetAnchor==7){opts.posCss.left=el.left}if(opts.positionTargetAnchor==1||opts.positionTargetAnchor==5||opts.positionTargetAnchor==8){opts.posCss.left=el.left+el.width/2}if(opts.positionTargetAnchor==2||opts.positionTargetAnchor==3||opts.positionTargetAnchor==4){opts.posCss.left=el.left+el.width}if(opts.positionModalAnchor==3||opts.positionModalAnchor==7||opts.positionModalAnchor==8){opts.posCss.top-=dialog.container.outerHeight()/2}if(opts.positionModalAnchor==4||opts.positionModalAnchor==5||opts.positionModalAnchor==6){opts.posCss.top-=dialog.container.outerHeight()}if(opts.positionModalAnchor==1||opts.positionModalAnchor==5||opts.positionModalAnchor==8){opts.posCss.left-=dialog.container.outerWidth()/2}if(opts.positionModalAnchor==2||opts.positionModalAnchor==3||opts.positionModalAnchor==4){opts.posCss.left-=dialog.container.outerWidth()}opts.posCss.left+=opts.position[0];opts.posCss.top+=opts.position[1];opts.posCss.position=ie6||ieQuirks||isTouch?"absolute":"fixed";opts.posCss.top-=ie6||ieQuirks||isTouch?0:$(window).scrollTop();dialog.container.css(opts.posCss);if(isTouch||ie6||ieQuirks){dialog.overlay.css("top",$(window).scrollTop())}if(opts.close.show){var cl_l=opts.posCss.left;if(typeof opts.close.textCss.left=="undefined"){cl_l+=ww-(this.getVal(dialog.closeHTML.outerWidth())+this.getVal(dialog.container.css("borderRightWidth"))+this.getVal(opts.close.textCss.right))}else{cl_l+=this.getVal(opts.close.textCss.left)+this.getVal(dialog.container.css("borderLeftWidth"))}var cl_t=opts.posCss.top+this.getVal(opts.close.textCss.top)+this.getVal(dialog.container.css("borderTopWidth"));dialog.closeHTML.css({left:cl_l,top:cl_t,right:"auto"})}this.repositionArrows()},watchTab:function(e){var self=this;if($(e.target).parents(".liknomodal-container").length>0){self.inputs=$(":input:enabled:visible:first, :input:enabled:visible:last",dialog.data);if(!e.shiftKey&&e.target==self.inputs[self.inputs.length-1]||e.shiftKey&&e.target==self.inputs[0]||self.inputs.length==0){e.preventDefault();var pos=e.shiftKey?"last":"first";setTimeout(function(){self.focus(pos)},10)}}else{e.preventDefault();setTimeout(function(){self.focus()},10)}},loadAndOpen:function(){var self=this;if(opts.close.stillLoading&&!$.browser.msie&&document.location.protocol.substr(0,4)!="file"){setTimeout(function(){self.loadAndOpen()},10)}else{if(opts.hideScrollbars){if($(opts.D).find("body")[0])opts.docScroll=$(opts.D).find("body")[0].style.overflow;$(opts.D).find("body").css("overflow","hidden")}this.setData(false);if(opts.isMultiSheet&&opts.navigationBar.show&&opts.navigationBar.showWhere>0&&opts.navigationBar.showWhere<11){this.positionNavigationBar()}self.open()}},open:function(){var self=this;if(opts.settingData){setTimeout(function(){self.open()},100);return}dialog.iframe&&dialog.iframe.show();if($.isFunction(opts.onOpen)){opts.onOpen.apply(this,[dialog])}else{if(opts.header.show)dialog.header.show();if(opts.footer.show)dialog.footer.show();if(opts.isMultiSheet&&opts.navigationBar.show)dialog.navigationBar.show();if(opts.close.show)dialog.closeHTML.show();var cl_l=0,cl_t=0;if(opts.close.show){if(typeof opts.close.textCss.left=="undefined"){cl_l+=opts.glideWidth+this.getVal(dialog.container.css("borderLeftWidth"))-this.getVal(dialog.closeHTML.outerWidth())-this.getVal(opts.close.textCss.right)}else{cl_l+=this.getVal(opts.close.textCss.left)+this.getVal(dialog.container.css("borderLeftWidth"))}cl_t=this.getVal(opts.close.textCss.top)+this.getVal(dialog.container.css("borderTopWidth"))}var t=this.getVal(dialog.container.css("top"));var l=this.getVal(dialog.container.css("left"));var w=this.getDimensions();if(typeof opts.animation.open.window.what.top!="undefined"&&typeof opts.animation.open.window.what.left!="undefined"){dialog.container.show();dialog.wrap.show();dialog.container.css("width",opts.glideWidth);if(opts.isMultiSheet&&opts.floatingArrows.show){dialog.previousArrow.show();dialog.nextArrow.show();this.repositionArrows();opts.animation.previousArrow={openWhat:{}};opts.animation.previousArrow.openWhat.top=dialog.previousArrow.offset().top;opts.animation.previousArrow.openWhat.left=dialog.previousArrow.offset().left;opts.animation.nextArrow={openWhat:{}};opts.animation.nextArrow.openWhat.top=dialog.nextArrow.offset().top;opts.animation.nextArrow.openWhat.left=dialog.nextArrow.offset().left;dialog.previousArrow.hide();dialog.nextArrow.hide()}opts.animation.open.isGlide=true;if(opts.animation.open.window.what.top==-1)dialog.container.css("top",-dialog.container.outerHeight());else if(opts.animation.open.window.what.top==1)dialog.container.css("top",w[0]);if(opts.animation.open.window.what.left==-1)dialog.container.css("left",-dialog.container.outerWidth());else if(opts.animation.open.window.what.left==1)dialog.container.css("left",w[1]);if(opts.close.show){dialog.closeHTML.css("left",this.getVal(dialog.container.css("left"))+cl_l);dialog.closeHTML.css("top",this.getVal(dialog.container.css("top"))+cl_t)}if(opts.isMultiSheet&&opts.floatingArrows.show){this.repositionArrows();dialog.previousArrow.show();dialog.nextArrow.show()}opts.animation.open.window.what.top=t;opts.animation.open.window.what.left=l;if(ie6||ieQuirks){opts.animation.open.window.what.top=this.getVal(opts.animation.open.window.what.top)+(document.body.scrollTop>document.documentElement.scrollTop?document.body.scrollTop:document.documentElement.scrollTop)+"px";opts.animation.open.window.what.left=this.getVal(opts.animation.open.window.what.left)+(document.body.scrollLeft>document.documentElement.scrollLeft?document.body.scrollLeft:document.documentElement.scrollLeft)+"px"}if(opts.close.show){opts.animation.closeHTML.openWhat.top=this.getVal(opts.animation.open.window.what.top)+cl_t;opts.animation.closeHTML.openWhat.left=this.getVal(opts.animation.open.window.what.left)+cl_l}}else{if(opts.close.show){opts.animation.closeHTML.openWhat=opts.animation.open.window.what}if(opts.isMultiSheet&&opts.floatingArrows.show){opts.animation.previousArrow={openWhat:opts.animation.open.window.what};opts.animation.nextArrow={openWhat:opts.animation.open.window.what}}}dialog.overlay.animate(opts.animation.open.overlay.what,opts.animation.open.overlay.how.duration,opts.animation.open.overlay.how.easing);dialog.container.animate(opts.animation.open.window.what,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing,function(){setTimeout(function(){self.setContainerDimensions()},10)});if(opts.close.show)dialog.closeHTML.animate(opts.animation.closeHTML.openWhat,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing);if(opts.isMultiSheet&&opts.floatingArrows.show){dialog.previousArrow.animate(opts.animation.previousArrow.openWhat,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing);dialog.nextArrow.animate(opts.animation.nextArrow.openWhat,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing)}if(!opts.animation.open.isGlide){if(opts.header.show)dialog.header.animate(opts.animation.open.window.what,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing);dialog.wrap.animate(opts.animation.open.window.what,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing);if(opts.isMultiSheet&&opts.navigationBar.show)dialog.navigationBar.animate(opts.animation.open.window.what,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing);if(opts.footer.show)dialog.footer.animate(opts.animation.open.window.what,opts.animation.open.window.how.duration,opts.animation.open.window.how.easing)}}this.bindEvents()},close:function(doNext){var self=this;if(!dialog.data){return false}if(self.autoClose)clearTimeout(self.autoClose);if(opts.play.timer)clearInterval(opts.play.timer);
if(opts.letUserBlockWindow){if($(".lwmw_noreopen:checked").length>0){var p=dialog.container.find(".lwmw_noreopen:checked").attr("lwmw_noreopen_period");if(typeof p=="undefined"||p=="session"||p=="0")$.cookie(opts.modalFullId," ");else{p=parseInt(p);if(!isNaN(p)&&p>0)$.cookie(opts.modalFullId," ",{expires:p})}}}self.unbindEvents();if($.isFunction(opts.onClose)&&!self.occb){self.occb=true;opts.onClose.apply(self,[dialog])}else{try{top.countLWMW--}catch(e){}var maxDelay=0,tmpDelay;tmpDelay=getDelay(opts.animation.close.overlay.how);if(maxDelay<tmpDelay)maxDelay=tmpDelay;tmpDelay=getDelay(opts.animation.close.window.how);if(maxDelay<tmpDelay)maxDelay=tmpDelay;var t=this.getVal(dialog.container.css("top"));var l=this.getVal(dialog.container.css("left"));var w=this.getDimensions();if(opts.close.show){var cl_l=0;if(typeof opts.close.textCss.left=="undefined"){cl_l+=opts.glideWidth+this.getVal(dialog.container.css("borderLeftWidth"))-this.getVal(dialog.closeHTML.outerWidth())-this.getVal(opts.close.textCss.right)}else{cl_l+=this.getVal(opts.close.textCss.left)+this.getVal(dialog.container.css("borderLeftWidth"))}var cl_t=this.getVal(opts.close.textCss.top)+this.getVal(dialog.container.css("borderTopWidth"))}if(typeof opts.animation.close.window.what.top!="undefined"&&typeof opts.animation.close.window.what.left!="undefined"){if(opts.isMultiSheet&&opts.floatingArrows.show){opts.animation.previousArrow={closeWhat:{top:-(dialog.container.outerHeight()/2+dialog.previousArrow.outerHeight()/2),left:-(dialog.container.outerWidth()+dialog.previousArrow.outerWidth()/2)}};opts.animation.nextArrow={closeWhat:{top:-(dialog.container.outerHeight()/2+dialog.previousArrow.outerHeight()/2),left:-dialog.previousArrow.outerWidth()/2}}}opts.animation.close.isGlide=true;if(opts.animation.close.window.what.top==-1)opts.animation.close.window.what.top=-dialog.container.outerHeight();else if(opts.animation.close.window.what.top==1)opts.animation.close.window.what.top=w[0];else opts.animation.close.window.what.top=t;if(opts.animation.close.window.what.left==-1)opts.animation.close.window.what.left=-dialog.container.outerWidth();else if(opts.animation.close.window.what.left==1)opts.animation.close.window.what.left=w[1];else opts.animation.close.window.what.left=l;if(ie6||ieQuirks){opts.animation.close.window.what.top=this.getVal(opts.animation.close.window.what.top)+(document.body.scrollTop>document.documentElement.scrollTop?document.body.scrollTop:document.documentElement.scrollTop)+"px";opts.animation.close.window.what.left=this.getVal(opts.animation.close.window.what.left)+(document.body.scrollLeft>document.documentElement.scrollLeft?document.body.scrollLeft:document.documentElement.scrollLeft)+"px"}if(opts.close.show){opts.animation.closeHTML.closeWhat.top=this.getVal(opts.animation.close.window.what.top)+cl_t;opts.animation.closeHTML.closeWhat.left=this.getVal(opts.animation.close.window.what.left)+cl_l}}else{if(opts.close.show){opts.animation.closeHTML.closeWhat=opts.animation.close.window.what}if(opts.isMultiSheet&&opts.floatingArrows.show){opts.animation.previousArrow={closeWhat:opts.animation.close.window.what};opts.animation.nextArrow={closeWhat:opts.animation.close.window.what}}}if(typeof opts.animation.open.window.what.top!="undefined"&&typeof opts.animation.open.window.what.left!="undefined"){dialog.container.css("width",opts.glideWidth)}dialog.overlay.animate(opts.animation.close.overlay.what,opts.animation.close.overlay.how.duration,opts.animation.close.overlay.how.easing,function(){if(opts.hideScrollbars)$(opts.D).find("body").css("overflow",opts.docScroll);if(opts.breakOutOfFrames)return;if(dialog.parentNode.length>0){if(opts.persist){var i=0;dialog.data.each(function(){$(this).hide().insertAfter(dialog.parentNode[i++])})}else{dialog.data.hide().remove();var i=0;dialog.orig.each(function(){$(this).insertAfter(dialog.parentNode[i++])})}for(var i=0;i<dialog.parentNode.length;i++)dialog.parentNode[i].remove()}else{dialog.data.hide().remove()}dialog.container.hide().remove();dialog.overlay.hide().remove();if(opts.close.show)dialog.closeHTML.hide().remove();dialog.iframe&&dialog.iframe.hide().remove();dialog.navigationBarCssClasses.remove();if(opts.isMultiSheet&&opts.floatingArrows.show){dialog.previousArrow.remove();dialog.nextArrow.remove();dialog.floatingArrowsCssClasses.remove()}dialog={};if(typeof doNext=="function")doNext();if(typeof opts.afterClose=="function")opts.afterClose();setTimeout(function(){$(window).scrollTop(opts.originalWindowScroll)},10)});if(opts.breakOutOfFrames)setTimeout(function(){if(dialog.parentNode.length>0){if(opts.persist){var i=0;dialog.data.each(function(){$(this).hide().insertAfter(dialog.parentNode[i++])})}else{dialog.data.hide().remove();var i=0;dialog.orig.each(function(){$(this).insertAfter(dialog.parentNode[i++])})}for(var i=0;i<dialog.parentNode.length;i++)dialog.parentNode[i].remove()}else{dialog.data.hide().remove()}dialog.container.hide().remove();dialog.overlay.hide().remove();if(opts.close.show)dialog.closeHTML.hide().remove();dialog.iframe&&dialog.iframe.hide().remove();dialog.navigationBarCssClasses.remove();if(opts.isMultiSheet&&opts.floatingArrows.show){dialog.previousArrow.remove();dialog.nextArrow.remove();dialog.floatingArrowsCssClasses.remove()}dialog={};if(typeof doNext=="function")doNext();if(typeof opts.afterClose=="function")opts.afterClose()},opts.animation.close.overlay.how.duration);if(dialog.container){dialog.container.animate(opts.animation.close.window.what,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing);if(opts.close.show)dialog.closeHTML.animate(opts.animation.closeHTML.closeWhat,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing);if(opts.isMultiSheet&&opts.floatingArrows.show){dialog.previousArrow.animate(opts.animation.previousArrow.closeWhat,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing);dialog.nextArrow.animate(opts.animation.nextArrow.closeWhat,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing)}if(!opts.animation.close.isGlide){if(opts.header.show)dialog.header.animate(opts.animation.close.window.what,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing);dialog.wrap.animate(opts.animation.close.window.what,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing);if(opts.isMultiSheet&&opts.navigationBar.show)dialog.navigationBar.animate(opts.animation.close.window.what,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing);if(opts.footer.show)dialog.footer.animate(opts.animation.close.window.what,opts.animation.close.window.how.duration,opts.animation.close.window.how.easing)}}}},getParams:function(me){var params={containerCss:{},header:{},footer:{}};if(me.attr("data-lwmw-height")){params.containerCss.height=me.attr("data-lwmw-height")==""?"auto":me.attr("data-lwmw-height")}if(me.attr("data-lwmw-width")){params.containerCss.width=me.attr("data-lwmw-width")==""?"auto":me.attr("data-lwmw-width")}if(me.attr("data-lwmw-header")){params.header.text=me.attr("data-lwmw-header")}if(me.attr("data-lwmw-footer")){params.footer.text=me.attr("data-lwmw-footer")}return params},getParamAttrs:function(me){var params="";if(me.attr("data-lwmw-height")){params+=' data-lwmw-height="'+(me.attr("data-lwmw-height")==""?"auto":me.attr("data-lwmw-height"))+'"'}if(me.attr("data-lwmw-width")){params+=' data-lwmw-width="'+(me.attr("data-lwmw-width")==""?"auto":me.attr("data-lwmw-width"))+'"'}if(me.attr("data-lwmw-header")){params+=' data-lwmw-header="'+me.attr("data-lwmw-header")+'"'}if(me.attr("data-lwmw-footer")){params+=' data-lwmw-footer="'+me.attr("data-lwmw-footer")+'"'}return params},getParamAttrsObject:function(me){var params={};if(me.attr("data-lwmw-height")){$.extend(params,{"data-lwmw-height":me.attr("data-lwmw-height")==""?"auto":me.attr("data-lwmw-height")})}if(me.attr("data-lwmw-width")){$.extend(params,{"data-lwmw-width":me.attr("data-lwmw-width")==""?"auto":me.attr("data-lwmw-width")})}if(me.attr("data-lwmw-header")){$.extend(params,{"data-lwmw-header":me.attr("data-lwmw-header")})}if(me.attr("data-lwmw-footer")){$.extend(params,{"data-lwmw-footer":me.attr("data-lwmw-footer")})}return params}};$.liknoModal.makePageLinks=function(modalName,modalOpts){var selector="a[target="+modalName+"_single],a[target="+modalName+"_multi_divs],area[target="+modalName+"_single],area[target="+modalName+"_multi_divs]";if(typeof $("body").on!="function"){$(selector).live("mouseover focus",function(){makeLink($(this))})}else{$("body").on("mouseover focus",selector,function(){makeLink($(this))})}function makeLink(me){if(!me.data("fixedLink"))me.data("fixedLink",true);else return;var is_multi=me.attr("target")==modalName+"_multi_divs";var params=$.liknoModal.impl.getParams(me);if(me.attr("href").substring(0,1)=="#"){me.click(function(){$.liknoModal.impl.init($((is_multi?".":"#")+me.attr("href").substring(1)),$.extend(true,{},modalOpts,{isMultiSheet:is_multi},params));return false})}else{me.click(function(){if(is_multi){var data=$("<div>loading...</div>");data.load(me.attr("href"),function(){$.liknoModal.impl.init($(data).html(),$.extend(true,{},modalOpts,{isMultiSheet:true},params))})}else{$.liknoModal.impl.init("<div externalUrl='"+me.attr("href")+"'> </div>",$.extend(true,{},modalOpts,{isMultiSheet:false},params))}return false})}}var groupData="";$("a[target="+modalName+"_multi_links],area[target="+modalName+"_multi_links]").each(function(){var params=$.liknoModal.impl.getParamAttrs($(this));if($(this).attr("href").substring(0,1)=="#"){groupData+="<div"+params+">"+$($(this).attr("href")).html()+"</div>"}else{groupData+="<div"+params+" externalUrl='"+$(this).attr("href")+"'> </div>"}});var group_count=0;$("a[target="+modalName+"_multi_links],area[target="+modalName+"_multi_links]").each(function(){$(this).data("sheet",group_count++);$(this).click(function(){$.liknoModal.impl.init(groupData,$.extend(true,{},modalOpts,{isMultiSheet:true,currentSheet:$(this).data("sheet")}));return false})});$("form[target="+modalName+"_form]").each(function(){var params=$.liknoModal.impl.getParams($(this));var self=$(this)[0];$(this).attr("target",modalOpts.modalFullId+"_iframe");var x=self.onsubmit?self.onsubmit:function(){return true};self.onsubmit=function(){if(x()){$.liknoModal.impl.init("<div externalUrl=''> </div>",$.extend(true,{},modalOpts,{isMultiSheet:false},params));var doSubmit=function(){if($("iframe[name="+modalOpts.modalFullId+"_iframe]").length)setTimeout(function(){self.submit()},100);else setTimeout(doSubmit,100)};doSubmit();return false}else return false}})}})(lQuery);function getDelay(x){if(typeof x=="number")return x;else if(typeof x=="string")return parseInt(x);else if(typeof x=="object"){if(typeof x.duration=="number")return x.duration;else if(typeof x.duration=="string")return parseInt(x.duration);else return 0}else return 0}var lwmw_imageCache=[];var lwmw_imageCacheCounter=0;function lwmw_get_background_url(x){if(typeof x!="string"||!x||x==""||x=="none")return"";if(x.indexOf("url(")>-1){x=x.replace(/\'/gi,"").replace(/\"/gi,"").replace(/url/gi,"").replace(/\)/gi,"").replace(/\(/gi,"")}return x}function lwmw_preloadImages(opts,content){if(typeof opts==="object"){if(typeof opts.ajaxLoadDiv==="string")if(opts.ajaxLoadDiv!=""){lQuery("<div>"+opts.ajaxLoadDiv+"</div>").find("img").each(function(){lwmw_imageCache[lwmw_imageCacheCounter]=new Image(1,1);lwmw_imageCache[lwmw_imageCacheCounter++].src=lQuery(this).attr("src")})}if(typeof opts.close==="object")if(typeof opts.close.text==="string")if(opts.close.text!=""){lQuery("<div>"+opts.close.text+"</div>").find("img").each(function(){lwmw_imageCache[lwmw_imageCacheCounter]=new Image(1,1);lwmw_imageCache[lwmw_imageCacheCounter++].src=lQuery(this).attr("src")})}if(opts.isMultiSheet){if(typeof opts.navigationBar==="object")if(typeof opts.navigationBar.images==="object"){lQuery.each(["butFirst","butFirstOver","butPrev","butPrevOver","butPlay","butPlayOver","butPause","butPauseOver","butNext","butNextOver","butLast","butLastOver"],function(i,el){eval("if (typeof opts.navigationBar.images."+el+" === 'string') if (typeof opts.navigationBar.images."+el+" != '') { lwmw_imageCache[lwmw_imageCacheCounter] = new Image(1,1); lwmw_imageCache[lwmw_imageCacheCounter++].src = opts.navigationBar.images."+el+"; }");eval("if (typeof opts.navigationBar.images."+el+" === 'string') if (typeof opts.navigationBar.images."+el+" != '') { lwmw_imageCache[lwmw_imageCacheCounter] = new Image(1,1); lwmw_imageCache[lwmw_imageCacheCounter++].src = opts.navigationBar.images."+el+"; }")})}}lQuery.each(["containerCss","wrapCss","bodyCss","headerCss","footerCss"],function(i,el){eval("if (typeof opts."+el+" === 'object') if (typeof opts."+el+".backgroundImage === 'string') if (opts."+el+".backgroundImage != '' || opts."+el+".backgroundImage != 'none') { lwmw_imageCache[lwmw_imageCacheCounter] = new Image(1,1); lwmw_imageCache[lwmw_imageCacheCounter++].src = lwmw_get_background_url(opts."+el+".backgroundImage); }")})}if(content!=null){var x=0;var p1=p2=0;var tmp="";while(x>-1){p1=content.indexOf("<img",x);if(p1>0){p2=content.indexOf(">",p1)+1;tmp=content.substring(p1,p2);lwmw_imageCache[lwmw_imageCacheCounter]=new Image(1,1);lwmw_imageCache[lwmw_imageCacheCounter++].src=lQuery(tmp).attr("src");x=p2+2}else x=-1}}}function lwmw_bind_mouseout(m,b){notOpenedYet=true;lQuery(document).mousemove(function(e){if(notOpenedYet&&lQuery("#"+m+"-container").length==0){if(e.pageY-lQuery(window).scrollTop()<b){notOpenedYet=false;eval(m+"();")}}})}function lwmw_checkVarUrl(p,m){var p1=p.replace(/-/g,"_"),loadme=false,loadsheet=0;if(eval("typeof ("+p1+"_"+m+"_open)")!="undefined"||eval("typeof ("+m+"_open)")!="undefined"){loadme=true;if(eval("typeof ("+p1+"_"+m+"_open)")!="undefined")loadsheet=eval(p1+"_"+m+"_open");else loadsheet=eval(m+"_open");if(typeof loadsheet=="number")loadsheet--;else loadsheet="'"+loadsheet+"'"}var tmp=document.location.href;if(tmp.indexOf("#")>-1){tmp=tmp.substr(tmp.indexOf("#")+1);var t_arr=tmp.split("#");for(var i=0;i<t_arr.length;i++){if(t_arr[i].indexOf(p1+"_"+m+"_")==0||t_arr[i].indexOf(p+"_"+m+"_")==0||t_arr[i].indexOf(m+"_")==0){var t1;if(t_arr[i].indexOf(p1+"_"+m+"_")==0)t1=p1+"_"+m+"_";else if(t_arr[i].indexOf(p+"_"+m+"_")==0)t1=p+"_"+m+"_";else if(t_arr[i].indexOf(m+"_")==0)t1=m+"_";t1=t_arr[i].substr(t1.length);if(t1.length>0){loadme=true;if(!isNaN(Number(t1)))loadsheet=t1-1;else{loadsheet="'"+t1+"'"}}}}}if(loadme){lQuery(function(){eval(p1+"."+m+"({currentSheet:"+loadsheet+"})")})}}if(typeof nRTC!="function")nRTC=function(str){str=lQuery.trim(str);var def=str.split(";");var retArr={};for(i=0;i<def.length;i++){var side=def[i].split(":"),name="",val="";if(def[i]){side[0]=side[0].toLowerCase();if(side.length>2){for(k=2;k<side.length;k++){side[1]+=":"+side[k]}}for(j=0;j<side.length;j++){if(j==0){str=side[j].split("-");var outstr=str[0];for(k=1;k<str.length;k++){outstr=outstr+str[k].charAt(0).toUpperCase()+str[k].substring(1)}name=lQuery.trim(outstr)}else{if(j==1){val=lQuery.trim(side[j])}}}retArr[name]=val}}return retArr};var $l7=$l3(),$l5=$l3(),$l6=$l3(),$l8=$l3();var headID=document.getElementsByTagName("head")[0];function $l0(){$l7=$l3(),$l5=$l3(),$l6=$l3(),$l8=$l3()}function $l1(s){s2=s.split("");s1="";for(var i=0;i<s.length;i++){s1+="%"+s2[i]+s2[i+1];i++}return unescape(s1)}function $l2(){$l5="";$l8[$l8.length]="";for(var i=2;i<$l7.length;i++){$l5+="."+$l1($l7[i]);if($l1($l7[i])==$l1("7C")){$l8[$l8.length]="";$l8[$l8.length-2]=$l8[$l8.length-2].substring(1)}else{$l8[$l8.length-1]+="."+$l1($l7[i])}}$l8[$l8.length-1]=$l8[$l8.length-1].substring(1);$l5=$l5.substring(1);var lwmwmpi2=typeof lwmwmpin=="string"?lwmwmpin:lwmwmpi;$l7[0]=lwmwmpi2.substring(0,lwmwmpi2.search($l1($l7[1])));$l7[$l7.length]=lwmwmpi2.substring(lwmwmpi2.search($l1($l7[1]))+3);if($l7[$l7.length-1].substring(0,3)==$l1("777777"))if(!isNaN($l7[$l7.length-1].substring(3,4))&&$l7[$l7.length-1].substring(4,5)==$l1("2E"))$l7[$l7.length-1]=$l7[$l7.length-1].substring(5);if($l7[$l7.length-1].substring(0,4)==$l1("7777772E"))$l7[$l7.length-1]=$l7[$l7.length-1].substring(4);$l7[$l7.length-1]=$l7[$l7.length-1].substring(0,$l7[$l7.length-1].search("/"));if($l7[$l7.length-1].search(":")>-1)$l7[$l7.length-1]=$l7[$l7.length-1].substring(0,$l7[$l7.length-1].search(":"))+"/";else $l7[$l7.length-1]+="/"}function $l3(){return new Array}function $l4($s){for(d=0;d<$l8.length;d++){if($s==$l8[d]||$l8[d]==$l1($l6[2])){return true}else{var dD=$s.length-$l8[d].length;if(dD>0)if($s.substring(dD)==$l8[d]&&$s.substring(0,dD-1).search(/\./)==-1)return true}}$s=$s.substring(0,$s.length-1);if($s.length){$s=$s.replace(/\./g,"");return!isNaN($s)}return false}
/*274.1*/